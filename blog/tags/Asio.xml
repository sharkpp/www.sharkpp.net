<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title><![CDATA[さめたすたすのお家]]></title>
    <link href="http://www.sharkpp.net/blog/tags/Asio.xml" rel="self"/>
    <link href="http://www.sharkpp.net/"/>
    <updated>2018-08-26T01:01:47+00:00</updated>
    <id>http://www.sharkpp.net/</id>
            <author>
            <name><![CDATA[sharkpp]]></name>                    </author>
        <generator uri="http://sculpin.io/">Sculpin</generator>
            <entry>
            <title type="html"><![CDATA[インストール: boostで遊ぶ 其の１]]></title>
            <link href="http://www.sharkpp.net/blog/2009/08/23/play-with-boost-part-1.html"/>
            <updated>2009-08-23T13:48:00+00:00</updated>
            <id>http://www.sharkpp.net/blog/2009/08/23/play-with-boost-part-1.html</id>
            <content type="html"><![CDATA[<p>最近、といっても数日前から<a href="http://www.boost.org/">boost</a>を触り始めた。</p>

<p>主に、<a href="http://www.kmonos.net/alang/boost/">Let's boost</a>を参考にしています。</p>

<p>まず、</p>

<ol>
<li>ダウンロードページから boost&#95;1&#95;39_0.7z と boost-jam-3.1.17-1-ntx86.zip をダウンロード＆解凍。</li>
<li>bjam.exe は boost と同じフォルダに入れました。</li>
<li>Let's boostのページのページに乗っ取ってインストールフォルダを決めパスをINCLUDEとLIBに設定。</li>
<li>「Visual Studio 2008 コマンド プロンプト」を起動しインストールフォルダ移動。</li>
<li></li>
</ol>

<pre>bjam --toolset=msvc link=static,shared release debug stage</pre>

<p>と入力してライブラリをビルド。</p>

<p>とここまで来て、<a href="http://www.kmonos.net/alang/boost/classes/asio.html">letsboost::asio</a>のサンプルを入力してコンパイルだーと「Visual Studio 2008 コマンド プロンプト」から</p>

<pre>cl /EHsc asio_sample.cpp
</pre>

<p>と入力すると...</p>

<pre>LINK : fatal error LNK1104: ファイル 'libboost_system-vc90-mt-s-1_39.lib' を開くことができません
</pre>

<p>＿|￣|○</p>

<p>ライブラリの設定を見直しやり直してもだめ...</p>

<p>ライブラリフォルダを見ると確かに無い...？？？</p>

<p>色々検索してみると今回のビルド方法の場合はどうもbjamのオプションがたりないようなので、</p>

<pre>bjam --toolset=msvc runtime-link=static link=static release debug stage
</pre>

<p>と <code>runtime-link=static</code> を追加すると libboost&#95;system-vc90-mt-s-1&#95;39.lib が生成されリンクできた。(<a href="#f1" name ="b1" title="IDEの場合のデフォルトは”マルチスレッド デバッグ DLL”で、libboost_system-vc90-mt-gd-1_39.libが必要とされるので、Let's boostの方法でOKです。">*1</a>)</p>

<p>exeが出来た、さー実行...？？あれ？</p>

<p>何も結果が出てこない...</p>

<p>コンパイルオプション変えてもだめ</p>

<p>でそういえばサンプルが入っていたなーと思い出し、boost\libs\asio\example\http\client の sync&#95;client.cpp と async&#95;client.cpp をコピーしビルド。</p>

<p>中身見ながら結構面倒なことやってるなーと思いつつ実行！</p>

<pre>Exception: 指定されたクラスが見つかりません。
</pre>

<p>おや？</p>

<p>クラスってなんだーと思い最終的にIDEでステップ実行。</p>

<pre>tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
</pre>

<p>の行で例外が発生しているみたい。</p>

<p>たどっていくと<code>getaddrinfo()</code>から10109が返ってくる。10109ってなんだろーって検索すると WSATYPE&#95;NOT&#95;FOUND らしい。</p>

<p>検索で見つかった<a href="http://yanchde.gozaru.jp/winsock2/getaddrinfo.html">getaddrinfo</a>をみながら、うーん WSATYPE&#95;NOT&#95;FOUND かーと考えてみると、サービス名に"http"って指定していたなーと思い、"80"にして実行してみるとうまく動いた。</p>

<p>asio_sample.cpp の方も "http" から "80" に変えるとこちらも動いた...</p>

<p>で結局、<code>getaddrinfo()</code>に与える引数でなぜか自分の環境では、"http"がだめみたいってことだった。</p>

<p>なんか設定があるのだろうか？？？</p>

<p>でやっとスタートラインに立てたので今回は終了</p>

<p><a href="#b1" name="f1">*1
</a>: IDEの場合のデフォルトは”マルチスレッド デバッグ DLL”で、libboost&#95;system-vc90-mt-gd-1&#95;39.libが必要とされるので、Let's boostの方法でOKです。</p>
]]></content>
        </entry>
    </feed>