<!DOCTYPE html>
<html>
<head><title>QtをVisual C++ 2008 Express Editionで使えるようにしてみる: Qtで遊ぶ 其の１ &mdash; さめたすたすのお家</title><meta charset="utf-8"><meta name="theme-color" content="#6877AA"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="robots" content="index, follow"><meta name="keywords" content="C++,Qt,Qtで遊ぶ"><link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" /><link href="/assets/lightbox2/dist/css/lightbox.css" rel="stylesheet" type="text/css" /><link href="/css/style.min.css" rel="stylesheet" type="text/css" /><!-- HTML5 shim, for IE6-8 support of HTML5 elements --><!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link rel="apple-touch-startup-image" href="/images/noname/2048x2048.png"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="shortcut icon" sizes="76x76" href="/images/noname/76x76.png"><link rel="shortcut icon" sizes="120x120" href="/images/noname/120x120.png"><link rel="shortcut icon" sizes="128x128" href="/images/noname/128x128.png"><link rel="shortcut icon" sizes="152x152" href="/images/noname/152x152.png"><link rel="shortcut icon" sizes="196x196" href="/images/noname/196x196.png"><link rel="shortcut icon" sizes="512x512" href="/images/noname/512x512.png"><link rel="shortcut icon" sizes="1024x1024" href="/images/noname/1024x1024.png"><link rel="shortcut icon" sizes="2048x2048" href="/images/noname/2048x2048.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/noname/76x76.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/noname/120x120.png"><link rel="apple-touch-icon" sizes="128x128" href="/images/noname/128x128.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/noname/152x152.png"><link rel="apple-touch-icon" sizes="196x196" href="/images/noname/196x196.png"><link rel="apple-touch-icon" sizes="512x512" href="/images/noname/512x512.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/images/noname/1024x1024.png"><link rel="apple-touch-icon" sizes="2048x2048" href="/images/noname/2048x2048.png"><link rel="stylesheet" href="/assets/highlightjs/styles/github.css" /><link rel="alternate" type="application/atom+xml" href="/atom.xml" title="さめたすたすのお家 activity feed" /><style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style><style>
        #go-top {
            display: none;
            bottom: 40px;
            right: 30px;
            width: 40px;
            height: 40px;
            text-align: center;
            border-radius: 10px;
            background-color: #fff;
            position: fixed;
            z-index: 999;
        }
        #go-top > i {
            font-size: 36px;
            line-height: 40px;
        }
        #toc {
            margin-left: 10px;
            margin-bottom: 10px;
            max-width: 350px;
            word-wrap: break-word;
        }
        </style></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><!-- Brand and toggle get grouped for better mobile display --><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">さめたすたすのお家</a></div><!-- Collect the nav links, forms, and other content for toggling --><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav pull-right"><li><a href="/blog/"><i class="fa fa-archive"></i> アーカイブ</a></li><li><a href="/blog/categories"><i class="fa fa-folder-open"></i> カテゴリ</a></li><li><a href="/blog/tags"><i class="fa fa-tags"></i> タグ</a></li><li><a href="/product/"><i class="fa fa-download"></i> 作ったもの</a></li><li><a href="/graffiti/"><i class="fa fa-paint-brush"></i> 落書き</a></li><li><a href="/link.html"><i class="fa fa-link"></i> リンク</a></li><li><a href="/about">About</a></li></ul></div><!-- /.navbar-collapse --></div><!-- /.container-fluid --></nav><div class="mainContent container"><ol class="breadcrumb" itemscope="itemscope"
                           itemtype="http://schema.org/BreadcrumbList"><li
　　　　　    itemscope="itemscope" itemprop="itemListElement"
　　　　　    itemtype="http://schema.org/ListItem"
           ><a itemprop="item" href="/"
           ><i class="fa fa-home fa-lg"></i
     >&nbsp;<span itemprop="name">HOME</span
           ><meta itemprop="position" content="1"
          /></a
       ></li><li
　　　　　    itemscope="itemscope" itemprop="itemListElement"
　　　　　    itemtype="http://schema.org/ListItem"
           ><a itemprop="item" href="/blog/2009/"
           ><span>2009</span
           ><meta itemprop="position" content="2"
          /></a
       ></li><li
　　　　　    itemscope="itemscope" itemprop="itemListElement"
　　　　　    itemtype="http://schema.org/ListItem"
           ><a itemprop="item" href="/blog/2009/10/"
           ><span>10</span
           ><meta itemprop="position" content="3"
          /></a
       ></li><li
　　　　　    itemscope="itemscope" itemprop="itemListElement"
　　　　　    itemtype="http://schema.org/ListItem"
           ><a itemprop="item" href="/blog/2009/10/04/"
           ><span>04</span
           ><meta itemprop="position" content="4"
          /></a
       ></li><li
            class="active"><span 
           ><span>QtをVisual C++ 2008 Express Editionで使えるようにしてみる: Qtで遊ぶ 其の１</span
       ></li></ol><article itemscope="itemscope" itemtype="http://schema.org/Article"><meta itemscope="itemscope" itemprop="mainEntityOfPage"
              itemType="https://schema.org/WebPage" itemid="http://www.sharkpp.net/blog/2009/10/04/play-with-qt-part-1.html"/><header><h1><span itemprop="headline">QtをVisual C++ 2008 Express Editionで使えるようにしてみる: Qtで遊ぶ 其の１</span><small>post</small></h1></header><div id="go-top"><i class="fa fa-arrow-circle-o-up fa-3x"></i></div><div itemprop="articleBody"><p>前から興味を持っていた、<a href="http://qt.nokia.com/title-jp">Qt</a>で遊び始めた。</p><p>クロスプラットフォームでルック＆フィールがネイティブなフレームワークとしてwxWidgetsかQtか迷うところだけどとりあえずQtに手を出してみた。</p><p>まず、Qtのオープンソース・Windows版はターゲットとしているコンパイラが<a href="http://www.mingw.org/">MinGW</a>みたいだけどVisual C++ 2008 Express Editionを使いたかったので検索。(<a href="#f1" name ="b1" title="http://www.off-soft.net/ja/develop/qt/qt1.html"><em>1</a>) (<a href="#f2" name ="b2" title="http://www.02.246.ne.jp/~torutk/cxx/qt/QtOnWindowsAndVisualStudio.html"></em>2</a>)</p><p>でも、結局MinGWも入れないと後のビルド途中でエラーが出てしまったのでMinGWも入れました。</p><p>で最初に、「Qt SDK for Windows」をインストールしてみたんだけど、これが大失敗。</p><p>configureがインストールフォルダに見つからなくて、色々探した。</p><p>結局、「Windows版Qtライブラリ」の方が正解だったみたい。</p><p>で「Windows版Qtライブラリ」をインストール。</p><p>次に、環境設定とライブラリとサンプルのビルド。</p><p>「Visual Studio 2008 コマンド プロンプト」を実行してインストールフォルダに移動。</p><p>Z:\Qtにインストールしたので、</p><pre>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC&gt;Z:
Z:\&gt;cd Z:\Qt
Z:\Qt&gt;
</pre><p>そして、対象の開発環境を指定し環境設定を行う。</p><p>今回は、静的リンクでEXEを作りたいので、<code>-static</code>オプションも追加(<a href="#f3" name ="b3" title="http://doc.trolltech.com/4.1/deployment-windows.html#building-qt-statically">*3</a>)</p><pre>Z:\Qt&gt;set QMAKESPEC=win32-msvc2008
Z:\Qt&gt;configure -debug-and-release -static -D _CRT_SECURE_NO_WARNINGS
Which edition of Qt do you want to use ?
Type 'c' if you want to use the Commercial Edition.
Type 'o' if you want to use the Open Source Edition.
o &lt;-- オープンソース版を使うので'o'を入力
This is the Qt for Windows Open Source Edition.
You are licensed to use this software under the terms of
the GNU General Public License (GPL) version 3
or the GNU Lesser General Public License (LGPL) version 2.1.
Type '3' to view the GNU General Public License version 3 (GPLv3).
Type 'L' to view the Lesser GNU General Public License version 2.1 (LGPLv2.1).
Type 'y' to accept this license offer.
Type 'n' to decline this license offer.
Do you accept the terms of the license?
y &lt;-- ライセンスを受諾したので'y'を入力
--- この後Maikfileの作成などなどが自動で行われます。 ---
Z:\Qt&gt;
</pre><p>この処理自体結構時間がかかる。</p><p>でライブラリ類やサンプルのMake。</p><pre>Z:\Qt&gt;nmake
--- 以下、ずらずらとビルドログが出力されます。 ---
Z:\Qt&gt;
</pre><p>なんか自分の環境では途中で失敗したけどテストアプリが生成できたので放置</p><p>OSの環境変数にも追加。</p><ul><li>set QMAKESPEC=win32-msvc2008</li><li>set PATH=%path%;C:\Qt\Qt\bin&#46;;C:\Qt\Qt\lib&#46;;C:\Qt\bin&#46;</li></ul><p>サンプル(<a href="#f4" name ="b4" title="http://null.michikusa.jp/misc/qt.html">*4</a>)を見ながら、コマンドを打ち込んでいく。</p><p>で、Visual Studioのプロジェクトファイルを生成しビルド。</p><p>出来た、EXEのインポート情報を見てみると...MSVCR90.DLLをインポートしていた＿|￣|○</p><p>プロジェクトのプロパティの構成プロパティ→C/C++→コード生成を開き、「ランタイムライブラリ」を「マルチスレッド (/MT)」に変更。</p><p>でビルド...</p><p>すると大量のリンクエラーが出るのでリンカを開き「特定のライブラリの無視」に msvcrt.lib を追加しビルド...</p><p>でもやっぱりエラーが出る。</p><p>で検索(<a href="#f5" name ="b5" title="http://d.kawataso.net/2008/03/vs2005qt4-1.html">*5</a>)</p><p>ライブラリ自体も「マルチスレッド (/MT)」に変更しないといけないみたいなので変更してビルド</p><p>ビルドが終わったらサンプルをもう一回ビルド＆インポート情報を確認</p><p>結果、完全に依存関係が無くなったEXEが出来ました。</p><p>EXEのサイズ：約5MB</p><p>...むー結構でかいな</p><p><a href="#b1" name="f1">*1
</a>: http://www.off-soft.net/ja/develop/qt/qt1.html</p><p><a href="#b2" name="f2">*2
</a>: http://www.02.246.ne.jp/~torutk/cxx/qt/QtOnWindowsAndVisualStudio.html</p><p><a href="#b3" name="f3">*3
</a>: http://doc.trolltech.com/4.1/deployment-windows.html#building-qt-statically</p><p><a href="#b4" name="f4">*4
</a>: http://null.michikusa.jp/misc/qt.html</p><p><a href="#b5" name="f5">*5
</a>: http://d.kawataso.net/2008/03/vs2005qt4-1.html</p></div><hr style="border-top: none; border-bottom: none; height: 5px; margin: 10px 0;" /><footer><div style="line-height: 25px; height: 25px;"><span style="display: inline-block; vertical-align: top;"><i class="fa fa-calendar"></i>&nbsp;
        <span itemprop="datePublished" content="2009-10-04">2009年10月04日</span>
        &nbsp;/&nbsp;
        <i class="fa fa-history"></i>&nbsp;<a href="https://github.com/sharkpp/www.sharkpp.net/commits/master/source/_posts/2009-10-04-play-with-qt-part-1.md">変更履歴</a>
        &nbsp;/&nbsp;
        <i class="fa fa-thumb-tack"></i>&nbsp;<a href="/blog/2009/10/04/play-with-qt-part-1.html">Permalink</a>
        &nbsp;/&nbsp;
    </span><meta itemprop="url" content="http://www.sharkpp.net/blog/2009/10/04/play-with-qt-part-1.html" /><span itemprop="author" itemscope itemtype="https://schema.org/Person"
          style="display: none;"
       ><span itemprop="name">sharkpp</span
   ></span><a href="http://b.hatena.ne.jp/entry/http%3A%2F%2Fwww.sharkpp.net%2Fblog%2F2009%2F10%2F04%2Fplay-with-qt-part-1.html"
       class="hatena-bookmark-button"
       data-hatena-bookmark-title="QtをVisual C++ 2008 Express Editionで使えるようにしてみる: Qtで遊ぶ 其の１ &mdash; さめたすたすのお家"
       data-hatena-bookmark-layout="simple-balloon"
       title="このエントリーをはてなブックマークに追加"
      ><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png"
            alt="このエントリーをはてなブックマークに追加"
            width="20" height="20" style="border: none;" /></a
      >&nbsp;
    <a href="https://twitter.com/share" class="twitter-share-button"
       data-url="http://www.sharkpp.net/blog/2009/10/04/play-with-qt-part-1.html" data-via="sharkpp">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div><div style="line-height: 25px; height: 25px;"><span class="categories"><i class="fa fa-folder-open"></i>&nbsp;カテゴリ:
                        <a href="/blog/categories/%E3%83%96%E3%83%AD%E3%82%B0">ブログ</a></span>
        &nbsp;/&nbsp;
                                <span class="tags"><i class="fa fa-tag"></i>&nbsp;タグ:
                        <a href="/blog/tags/C%2B%2B">C++</a>,                         <a href="/blog/tags/Qt">Qt</a>,                         <a href="/blog/tags/Qt%E3%81%A7%E9%81%8A%E3%81%B6">Qtで遊ぶ</a></span></div></footer><hr style="border-top: none; border-bottom: 1px dashed #aaa; margin: 10px 0;" /><nav class="article"><ul class="list-unstyled row"><li class="col-md-6 text-left"><a class="next" href="/blog/2009/10/04/play-with-qt-part-2.html" title="色々なメモ: Qtで遊ぶ 其の２"><span class="title"><i class="fa fa-chevron-left"></i> 色々なメモ: Qtで遊ぶ 其の２</span></a></li><li class="col-md-6 text-right"><a class="previous" href="/blog/2009/09/30/yabuinu-the-obfuscator-and-scrambler-for-hsp3-0-0-1-0-release.html" title="HSP3用難読化＆独自スクランブル ツール ”yabuinu” を公開しました"><span class="title">HSP3用難読化＆独自スクランブル ツール ”yabuinu” を公開しました</span><i class="fa fa-chevron-right"></i></a></li></ul></nav></article></div><footer class="footer"><dev class="overflow"><div class="container text-center"><ul class="list-unstyled list-inline"><li><a href="/atom.xml"        ><i class="fa fa-rss-square fa-2x"></i></a></li><li><a href="https://www.twitter.com/sharkpp"><i class="fa fa-twitter fa-2x"></i></a></li><li><a href="https://github.com/sharkpp"     ><i class="fa fa-github fa-2x"></i></a></li><li><i class="fa-li fa fa-ellipsis-h"></i><a href="/profile"><i class="fa fa-plus-circle fa-2x"></i></a></li><li> / <a href="https://github.com/sharkpp/www.sharkpp.net/issues/new?body=via /blog/2009/10/04/play-with-qt-part-1.html"
                                  rel="nofollow"><i class="fa fa-exclamation-circle"></i> 誤字脱字などを報告</a></li></ul></div><div class="container text-center"><ul class="list-unstyled list-inline"><li class="text-muted">Powerd by <a href="http://sculpin.io/">Sculpin</a></li><li class="text-muted">&copy; 2004-2019 sharkpp</li></ul></div><div class="container text-center text-muted"><ruby><rb>This page is licensed under a <a rel="nofollow" href="http://creativecommons.org/licenses/by/4.0/"
                                                            >Creative Commons Attribution 4.0 International License</a>.</rb><rp>(</rp><rt>このページは<a rel="nofollow" href="http://creativecommons.org/licenses/by/4.0/"
                                                  >クリエイティブ・コモンズ 表示 4.0 国際 ライセンス</a>の下に提供されています。</rt><rp>)</rp></ruby></div><div class="container text-center text-muted"><ruby><rb>Code snippets are additionally licensed under <a rel="nofollow" href="http://opensource.org/licenses/MIT"
                                                                            >The MIT License</a>.</rb><rp>(</rp><rt>さらに、コードスニペットは <a rel="nofollow" href="http://osdn.jp/projects/opensource/wiki/licenses%2FMIT_license"
                                                               >MIT ライセンス</a> の下にライセンスされています。</rt><rp>)</rp></ruby></div></div></footer><script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script>window.jQuery || document.write('<script src="/assets/jquery/jquery.min.js"><\/script>')</script><script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script>$('body').modal || document.write('<script src="/assets/bootstrap/js/bootstrap.min.js"><\/script>')</script><script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-5908801-2', 'auto');
            ga('send', 'pageview');
        </script><script src="/assets/highlightjs/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript">
            $('a img').each(function(){
                var rel = ($(this).attr('src').match(/images\u002f([0-9_]{4}_[0-9_]{4})/i) ||
                           ['','lightbox'])[1];
                $(this).parent()
                    .attr('data-lightbox', rel)
                    .attr('data-title', $(this).attr('alt'))
                    ;
            });
        </script><script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script><script>$(document).ready(function(){ window.lightbox || $.getScript("/assets/lightbox2/dist/js/lightbox.min.js"); });</script><script src="//cdnjs.cloudflare.com/ajax/libs/jquery-smooth-scroll/1.5.5/jquery.smooth-scroll.min.js"></script><script>$.smoothScroll || document.write('<script src="/assets/jquery-smooth-scroll/jquery.smooth-scroll.min.js"><\/script>')</script><script type="text/javascript">
            $('#toc a')
                .each(function(){
                    var id = $(this).attr('href').slice(1);
                    $(this)
                        .smoothScroll({
                            scrollTarget: $('[id="' + id + '"]'),
                            offset: -50,
                            beforeScroll: function(){ /*history.pushState({}, id, "#" + id);*/ }
                        });
                })
                ;
            $('#go-top')
                .on('click', function() {
                    $.smoothScroll({
                        scrollElement: $('body'),
                        scrollTarget: '',
                        beforeScroll: function(){ /*history.pushState({}, "", location.href.replace(location.hash, ''));*/ },
                        afterScroll: function(){ $('body').css('position', ''); }
                    });
                    return false;
                });
            $(window).scroll(function () {
                var scroll   = $(this).scrollTop();
                var visibled = $('#go-top').css('display') == 'block';
                var next_state = $('#go-top').attr('data-next-state');
                if (100 <= scroll && (!visibled || 'hidden' == next_state))
                    $('#go-top')
                        .stop(true, true)
                        .attr('data-next-state', 'visible')
                        .fadeIn('slow', function(){
                            $(this).removeAttr('data-next-state');
                        });
                else if (scroll < 100 && (visibled || 'visible' == next_state))
                    $('#go-top')
                        .stop(true, true)
                        .attr('data-next-state', 'hidden')
                        .fadeOut('slow', function(){
                            $(this).removeAttr('data-next-state');
                        });
            });
            $(window).scroll();
        </script><script type="text/javascript">
            $(document).ready(function(){
                // apply table to bootstrap css
                $('table:not([class])')
                    .addClass('table table-bordered table-hover table-condensed table-striped')
                    .wrap("<div style='width:100%;overflow-x:auto;'></div>");
             });
        </script><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></body></html>