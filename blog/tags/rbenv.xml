<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title><![CDATA[さめたすたすのお家]]></title>
    <link href="http://www.sharkpp.net/blog/tags/rbenv.xml" rel="self"/>
    <link href="http://www.sharkpp.net/"/>
    <updated>2017-07-22T05:35:30+00:00</updated>
    <id>http://www.sharkpp.net/</id>
            <author>
            <name><![CDATA[sharkpp]]></name>                    </author>
        <generator uri="http://sculpin.io/">Sculpin</generator>
            <entry>
            <title type="html"><![CDATA[Mac で rbenv を使って複数バージョンの Ruby を管理するためのメモ]]></title>
            <link href="http://www.sharkpp.net/blog/2015/10/25/ruby-rbenv-on-mac-osx-memo.html"/>
            <updated>2015-10-25T12:00:00+00:00</updated>
            <id>http://www.sharkpp.net/blog/2015/10/25/ruby-rbenv-on-mac-osx-memo.html</id>
            <content type="html"><![CDATA[<h2 id="%E6%A6%82%E8%A6%81">概要</h2>

<p>ちょっと、いろいろなバージョンの Ruby を使用しないといけない状況に陥ったので rbenv での ruby のバージョンを管理をする方法のメモ。
環境は、 Mac を使用しているので Homebrew を使って rbenv をインストールしています。</p>

<p>以前に <a href="/blog/2014/04/15/ruby-1-9-3-install-for-mac-10-8.html">Mac OS X 10.8 に Ruby 1.9.3 をインストールする方法</a> で rvm を使ってインストールしていましたが、ごっそりアインインストールをしています。</p>

<h2 id="%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">インストール</h2>

<p>まず rbenv と ruby-build をインストール</p>

<pre><code class="bash">$ brew install rbenv ruby-build
</code></pre>

<p>パスを通す＆設定反映</p>

<pre><code class="bash">$ echo 'eval "$(rbenv init -)"' &amp;gt;&amp;gt; ~/.bash_profile
$ source ~/.bash_profile
$ rbenv rehash
</code></pre>

<p>インストール可能なバージョンを調べるには</p>

<pre><code class="bash">$ rbenv install -l
</code></pre>

<p>で確認できますが、 JRuby とかいろいろ出てくるので</p>

<pre><code class="bash">$ rbenv install -l | grep -E "\s+[0-9]"
</code></pre>

<p>のようにしたほうが多少探しやすくなるかも。</p>

<p>とりあえず Ruby 1.9 と 2.2 をインストール</p>

<pre><code class="bash">$ rbenv install $(rbenv install -l |grep -E "^\s+1.9" | tail -n 1)
Cloning https://github.com/ruby/ruby.git...
Installing ruby-1.9.3-p551...
Installed ruby-1.9.3-p551 to ~/.rbenv/versions/1.9.3-p551

$ rbenv install $(rbenv install -l |grep -E "^\s+2.2" | tail -n 1)
Cloning https://github.com/ruby/ruby.git...
Installing ruby-2.2.1-dev...
Installed ruby-2.2.1 to ~/.rbenv/versions/2.2.1
</code></pre>

<p>システム全体で使用する Ruby を最新バージョンに切り替えるs</p>

<pre><code class="bash">$ rbenv global $(rbenv versions | sed -e "s/\*/ /g" | sort -n | tail -n 1 | cut -d " " -f 3)
</code></pre>

<h2 id="%E3%82%A2%E3%83%B3%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">アンインストール</h2>

<p>アンインストールも簡単、インストールしたフォルダ自体を削除するか聞かれるので、まぁ基本は <code>y</code> 一択だと思われる</p>

<pre><code class="bash">$ rbenv uninstall 1.9.3-p551
rbenv: remove ~/.rbenv/versions/1.9.3-p551? y
</code></pre>

<p>ただし、選択している Ruby をアンインストールした場合、選択し直さないといけない</p>

<pre><code class="bash">$ rbenv versions
rbenv: version `1.9.3-p551' is not installed
  system
  2.2.1
</code></pre>

<h2 id="%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86">バージョン管理</h2>

<p>システムにインストールされている Ruby のバージョンを確認するには</p>

<pre><code class="bash">$ rbenv versions
  system
  1.9.3-p551
* 2.2.1 (set by ~/test/.ruby-version)
</code></pre>

<p>です。</p>

<p><code>*</code> マークが付いているバージョンが現在選択されている Ruby のバージョンで、バージョンの後ろについている <code>set by XXXX</code> は、<code>.ruby-version</code> ファイルによってローカルでは、このバージョンが指定されています、ということです。</p>

<p>この状態でバージョンを確認すると</p>

<pre><code class="bash">$ ruby -v
ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin13.4.0]
</code></pre>

<p>となります。</p>

<p>あるプロジェクトがシステムで使用しているバージョンと違うバージョンの Ruby を必要としているなら</p>

<pre><code class="bash">$ rbenv local 1.9.3-p551
</code></pre>

<p>このようにします。</p>

<p>すると</p>

<pre><code class="bash">$ ruby -v
ruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-darwin13.4.0]
</code></pre>

<p>となります。</p>

<h2 id="%E3%81%BE%E3%81%A8%E3%82%81">まとめ</h2>

<p>インストール可能な一覧を取得</p>

<pre><code class="bash">$ rbenv install -l | grep -E "\s+[0-9]"
</code></pre>

<p>Ruby をインストール</p>

<pre><code class="bash">$ rbenv install バージョン
</code></pre>

<p>Ruby をアンインストール</p>

<pre><code class="bash">$ rbenv uninstall バージョン
</code></pre>

<p>インストールされている Ruby のバージョンの一覧を表示</p>

<pre><code class="bash">$ rbenv list
</code></pre>

<p>システムで使用する Ruby のバージョンを変更</p>

<pre><code class="bash">$ rbenv global バージョン
</code></pre>

<p>ローカル(カレントディレクトリ以下)で使用する Ruby のバージョンを変更</p>

<pre><code class="bash">$ rbenv local バージョン
</code></pre>

<h2 id="%E5%8F%82%E8%80%83">参考</h2>

<ul>
<li><a href="http://qiita.com/semind/items/f8f647e757842f08b9ec">Mac - homebrewでバージョンを指定してインストールする - Qiita</a></li>
<li><a href="http://qiita.com/dandy-z/items/578169e04acc475c39b5">Ruby 1.9と2.0, Rails3とRails4を切り替える - Qiita</a></li>
<li><a href="http://blog.livedoor.jp/noanoa07/archives/1897747.html">noanoa 日々の日記 : Ruby 2.0.0 を Homebrew + rbenv で OS X Mountain Lion にインストール</a></li>
<li><a href="http://nwpct1.hatenablog.com/entry/2014/03/20/173740">MacPortsからHomeBrewに乗換え&amp;Python開発環境構築 - c-bata web</a></li>
</ul>
]]></content>
        </entry>
    </feed>